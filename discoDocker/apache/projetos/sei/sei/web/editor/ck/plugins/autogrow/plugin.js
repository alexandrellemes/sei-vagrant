/*
 Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
(function(){function k(a){function n(){e=a.document;p=e[CKEDITOR.env.ie?"getBody":"getDocumentElement"]();d=CKEDITOR.env.quirks?e.getBody():e.getDocumentElement();g=CKEDITOR.dom.element.createFromHtml('\x3cspan style\x3d"margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;"\x3e'+(CKEDITOR.env.webkit?"\x26nbsp;":"")+"\x3c/span\x3e",e)}function c(){l&&d.setStyle("overflow-y","hidden");var h=a.window.getViewPaneSize().height,b;p.append(g);b=g.getDocumentPosition(e).y+g.$.offsetHeight;
g.remove();var f=a.document.getBody(),c;CKEDITOR.env.gecko&&(c=f.$.style.MozTransform)?(f=/[0-9]*\.?[0-9]+/g,b*=f.exec(c)):CKEDITOR.env.webkit&&(c=f.$.style.WebkitTransform)&&(f=/[0-9]*\.?[0-9]+/g,b*=f.exec(c));b+=k;b=Math.max(b,t);b=Math.min(b,q);b!=h&&m!=b&&(b=a.fire("autoGrow",{currentHeight:h,newHeight:b}).newHeight,a.resize(a.container.getStyle("width"),b,!0),m=b);l||(b<q&&d.$.scrollHeight>d.$.clientHeight?d.setStyle("overflow-y","hidden"):d.removeStyle("overflow-y"))}var m,e,p,d,g,k=a.config.autoGrow_bottomSpace||
0,t=void 0!==a.config.autoGrow_minHeight?a.config.autoGrow_minHeight:200,q=a.config.autoGrow_maxHeight||Infinity,l=!a.config.autoGrow_maxHeight;a.addCommand("autogrow",{exec:c,modes:{wysiwyg:1},readOnly:1,canUndo:!1,editorFocus:!1});var u={contentDom:1,afterZoom:1,selectionChange:1,insertElement:1,mode:1},r;for(r in u)a.on(r,function(h){"wysiwyg"==h.editor.mode&&setTimeout(function(){var b=a.getCommand("maximize");!a.window||b&&b.state==CKEDITOR.TRISTATE_ON?m=null:(c(),l||c())},100)});a.on("afterCommandExec",
function(a){"maximize"==a.data.name&&"wysiwyg"==a.editor.mode&&(a.data.command.state==CKEDITOR.TRISTATE_ON?d.removeStyle("overflow-y"):c())});a.on("contentDom",n);n();a.config.autoGrow_onStartup&&a.execCommand("autogrow")}CKEDITOR.plugins.add("autogrow",{init:function(a){if(a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE)a.on("instanceReady",function(){a.editable().isInline()?a.ui.space("contents").setStyle("height","auto"):k(a)})}})})();